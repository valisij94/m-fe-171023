# README

## Практическое занятие №33

Репозитарий содержит материалы по практическому занятию №33, посвященному работе с библиотеками `Redux`, `react-redux`.

### Цели занятия
- закрепление знаний, полученных на лекции;
- разбор практических примеров;
- практическое применение полученных знаний.

### Задачи занятия
1. Добавляем Redux-стейт в наше приложение. Библиотеки уже добавлены, так что можно с ними работать. Пока что, поработаем с простым примером - сделаем счетчик в редакс-стейте. То есть, прямо сейчас в редакс-стейте у нас будет просто число.

Что нужно сделать:
 - создать в проекте папку `store`
 - в этой папке, создать папку `reducers` - здсь будут наши редьюсеры
 - также создать папку `actions` - здсь будут `actionCreators`
 - создаем первые экшны. Пока что нам нужен только один тип экшна - `increment`, то есть увеличиваем значение счетчика на 1. Тип - `COUNTER/INCREMENT`.
 - создаем первый редьюсер в папке `reducers`. Называем его `counterReducer.js`. Это будет кусочек стейта, который отвечает за кол-во участников, инициализируем значение нулем. И обрабатываем в нем наш экшн из предыдущего пункта.
 - в папке `store` создать файл `store.js` - здесь мы инициализируем наш редакс-стейт, создаем `store`, и экспортируем его. При создании стора, ОБЯЗАТЕЛЬНО используем `combineReducers` - он нам понадобится дальше.
2. В компоненте `App`, нужно добавить кнопку с текстом `Increment`. При нажатии на кнопку, нам нужно увеличивать счетчик на 1, то есть "диспатчить экшн". Здесь нам поможет хук `useDispatch`.
3. Теперь извлечем эти данные из стейта. Попробуем это сделать в другом компоненте, `HomePage`. Нужно добавить тут параграф с текстом "Now counter is: " + ЗНАЧЕНИЕ_СЧЕТЧИКА. Чтобы извлечь эти данные из стейта, нам поможет хук `useSelector`.
4. Закрепляем. Нам нужно добавить возможность декремента (т.е. уменьшения значения счетчика на 1). Нужно сделать аналогичные действия: создать action, actionCreator, добавить нужные изменения в редьюсер, и добавить в компонент `App` кнопку с текстом `Decrement`. При нажатии на нее - уменьшать значение счетчика на 1.
5. Теперь поработаем с чем-то поинтереснее. Давайте хранить в редакс-стейте данные о товарах. Мы будем хранить их в виде объекта, у которого будет свойство `products` - собственно массив товаров, свойство `isFetching` - флаг загрузки, и `error` - если что-то пойдет не так, то сюда запишем ошибку. Нам нужно добавить несколько новых типов экшнов:
 - `startProductsRequest`,
 - `finishProductsRequest`,
 - `productsRequestError`

Типы экшнов: `PRODUCTS/START_REQUEST`, `PRODUCTS/FINISH_REQUEST`, `PRODUCTS/ERROR_REQUEST`.

6. Создаем редьюсер для тоаров. Начальное состояние:
```
const initialState = {
  products: [],
  isFetching: false,
  error: ''
}
```

Нужно обрабатывать те экшны, которые мы определили в задаче 5, то есть:
 - обрабатывать ситуации начала запроса товаров (меняем флаг isFetching на true).
 - обрабатывать успешную загрузку товаров
 - обрабатывать ситуацию с ошибкой (если что-то пошло не так).

7. Воспользуемся этими данными. В компоненте `ProductList`, теперь вместо работы с локальным стейтом, работаем с редакс-стейтом.

### Полезные ссылки по занятию:
 - [React Redux](https://ru.react-redux.js.org/introduction/getting-started) - официальная русскоязычная(!) документация. О качестве перевода лучше не задумываться - чем богаты. Рекомендуется в качестве справочника. Есть очень толковые примеры.
 - [Описание React-Redux](https://medium.com/swlh/react-redux-hooks-5e5dbb52d057) - англоязычное, но рекомендуется к прочтению. Немало полезной информации о хуках, о том, как это работает "под капотом". Также там упоминается "старый" редакс, без хуков (`connect`). Имеет смысл ознакомиться - на собесах попадается.
 - [О работе редакс под капотом](https://ivaneroshkin.medium.com/%D0%BA%D0%B0%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-redux-a967d8616398) - это для глубокого понимания, как работает редакс, и для демонстрации того, что он НЕ зависит от реакта, и может использоваться в plain JS code.